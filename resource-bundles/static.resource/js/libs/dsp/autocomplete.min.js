// Minified source of Autocomplete.js:
(function(f,k,b){var j;var n=function(r,q){if((this.element=(typeof(r)==="string")?e(r):r)){if((this.element.tagName||"").toLowerCase()==="input"){this.boundCheckValue=h(this.checkValue,this);this.cache={};this.container=null;this.elementHasFocus=false;this.highlightIdx=-1;this.lastValue="";this.shownValues=[];this.throttle=-1;this.usesTouch=(f.ontouchstart!==b);this.values=[];this.setOptions(q);this.init()}}};(j=n.prototype).nothing=function(){};j.setOptions=function(r){var q=Object.prototype.hasOwnProperty,s;this.options={useNativeInterface:true,offsetTop:0,offsetLeft:0,highlightColor:"#ffffff",highlightBgColor:"#3399ff",srcType:"",srcData:"",onInput:this.nothing};if(r){for(s in this.options){if(q.call(this.options,s)&&r[s]!==b){this.options[s]=r[s]}}}};j.init=function(){var t=this.options.srcType,s,q,r;this.values=(t==="array")?(this.options.srcData||[]).concat():(t==="dom")?this.getDomValues():(t==="xml")?this.getXmlValues():[];if(p&&this.options.useNativeInterface){if(this.options.onInput!==this.nothing){d(this.element,"input",this.boundCheckValue)}return this.setDatalist()}if(p&&(q=this.element.getAttribute("list"))){if((s=e(q))){s.parentNode.removeChild(s)}this.element.removeAttribute("list")}r=h(this.setElementFocus,this);d(this.element,"focus",r);d(this.element,"blur",r);if(k.activeElement===this.element){r({type:"focus"})}};j.getDomValues=function(){var x=this.element.getAttribute("list"),q=(x)?(e(x)||{}).parentNode:null,t=(q)?q.getElementsByTagName("option"):[],w,u,s,r=[];for(u=0,s=0;w=t[u];u++){if((w=w.value)!==b){r[s++]=w}}return r};j.getXmlValues=function(){var t=a(this.options.srcData),s,u,x,w,r,q=[];if((s=(t.getElementsByTagName("datalist")[0]||{}).childNodes)){for(x=0,r=0;u=s[x];x++){if(u.nodeName==="option"&&(w=u.getAttribute("value"))!==null){q[r++]=w}}}return q};j.setDatalist=function(){var r=this.element.getAttribute("list"),q=(this.container=(r&&e(r)));if(!q){q=(this.container=k.createElement("datalist"));q.id="list"+Math.ceil(Math.random()*50000);q.innerHTML=this.generateDatalistOptionsHtml();this.element.parentNode.appendChild(q);this.element.setAttribute("list",q.id)}else{if(this.options.srcType!=="dom"){q.innerHTML=this.generateDatalistOptionsHtml()}}};j.generateDatalistOptionsHtml=function(){if(this.values.length){return'<option value="'+this.values.join('"><option value="')+'">'}return""};j.setElementFocus=function(q){var r=(((q||f.event).type||"").toLowerCase()==="focus");if((this.elementHasFocus=r)){if(!this.container){this.lastValue=this.element.value;this.generateContainer();this.addInputListeners(q)}}else{if(this.shownValues.length){this.clearValues()}}};j.generateContainer=function(){var u=k.createElement("div"),r=(this.container=k.createElement("div")),s,q,t;if((q=f.getComputedStyle)&&(q=q(this.element,null))){t=q.getPropertyValue("display")}else{if((q=this.element.currentStyle)){t=q.display}}r.className="aCon";if(!this.usesTouch){d(r,"mousemove",h(this.highlightValue,this));if(g===b||g>=9){d(r,"mousedown",c);d(r,"mouseup",h(this.selectValue,this))}else{d(r,"mousedown",h(this.selectValue,this))}}else{d(r,"touchstart",h(this.highlightValue,this));d(r,"touchend",h(this.selectValue,this))}(s=r.style).minWidth=this.element.offsetWidth+"px";s.marginLeft=this.options.offsetLeft+"px";s.marginTop=(this.element.offsetHeight+this.options.offsetTop)+"px";u.className="aWrapper";u.style.display=t||"block";u.appendChild(r);this.element.parentNode.insertBefore(u,this.element)};j.addInputListeners=function(r){var q;if(g===b||g>=9){d(this.element,"input",this.boundCheckValue);if(g===9){q=h(this.toggleSelectionChangeEvent,this);d(this.element,"focus",q);d(this.element,"blur",q);q(r)}}else{d(this.element,"propertychange",h(this.checkForValuePropertyChange,this))}d(this.element,"keydown",h(this.performKeyAction,this))};j.toggleSelectionChangeEvent=function(q){if(q.type==="focus"){d(k,"selectionchange",this.boundCheckValue)}else{i(k,"selectionchange",this.boundCheckValue)}};j.checkForValuePropertyChange=function(){if(this.elementHasFocus&&f.event.propertyName==="value"){this.checkValue(f.event)}};j.checkValue=function(r){var s=this.element.value,q=this.lastValue;if(s!==q){this.matchValue(s);this.options.onInput.apply(this,[s,q]);this.lastValue=s}};j.matchValue=function(x){var r,s,v,t,u,w=[],q=0;if(!p||!this.options.useNativeInterface){if(x&&!(u=this.cache["r-"+x])){r=this.cache.escapeRgx||(this.cache.escapeRgx=/([-.*+?^${}()|[\]\/\\])/g);v=new RegExp("^("+x.replace(r,"\\$1")+".*)$","igm");t=this.cache.values||(this.cache.values=this.values.join("\n"));while((s=(v.exec(t)||[])[0])){if(x!==s){w[q++]=s}}u=(this.cache["r-"+x]=w.sort().slice(0,6))}if(u&&u.length){this.showValues(u)}else{this.clearValues()}}};j.performKeyAction=function(t){var u=(t=t||f.event).which||t.keyCode,r={9:1,13:1,27:1,38:1,40:1},q,s;if(r[u]){if(u===9||u===13){if(this.highlightIdx>-1){this.selectValue(t)}else{if(u===13&&f.opera){f.setTimeout(h(this.clearValues,this),0)}else{this.clearValues()}}}else{if(u===27){this.clearValues()}else{if((s=this.shownValues.length)){if((u===38&&this.highlightIdx===0)||(u===40&&this.highlightIdx===s-1)){this.setHighlightedIndex(-1)}else{if(u===38&&this.highlightIdx===-1){this.setHighlightedIndex(s-1)}else{this.setHighlightedIndex(this.highlightIdx+((u===38)?-1:1))}}}else{this.checkValue(t)}}}}};j.showValues=function(r){var u=[],v=0,w=/</g,t="&lt;",q,s;u[v++]="<ul class='aList'>";for(s=0,q=r.length;s<q;s++){u[v++]="<li data-idx='"+s+"' class='aLim'>"+r[s].replace(w,t)+"</li>"}u[v++]="</ul>";this.highlightIdx=-1;this.shownValues=r.concat();this.container.innerHTML=u.join("")};j.highlightValue=function(s){var u,r,q,t;if(this.usesTouch||(this.throttle++)&1){u=(s=s||f.event).target||s.srcElement;r=u.className||"";while(r.indexOf("aLim")===-1&&r!=="aCon"){r=(u=u.parentNode).className||""}if(r.indexOf("aLim")>-1){if((t=parseInt(u.getAttribute("data-idx")||-1,10))>-1){this.setHighlightedIndex(t)}}}};j.setHighlightedIndex=function(r){var s,q;if((r=Math.max(-1,r))!==this.highlightIdx){if(r<this.shownValues.length){if(r>-1||this.highlightIdx>-1){s=this.container.firstChild.children}if(r>-1){(q=s[r].style).color=this.options.highlightColor;q.backgroundColor=this.options.highlightBgColor}if(this.highlightIdx>-1){(q=s[this.highlightIdx].style).color="";q.backgroundColor=""}this.highlightIdx=r}}};j.selectValue=function(r){var q=(r=r||f.event).type.toLowerCase(),u=q!=="keydown"||(r.which||r.keyCode)!==9,t,s;if(q.indexOf("mouse")>-1||q.indexOf("touch")>-1){if(((t=r.target||r.srcElement).className||"").indexOf("aLim")>-1){if((s=parseInt(t.getAttribute("data-idx")||-1,10))>-1){this.highlightIdx=s}}}if(this.highlightIdx>-1){this.element.value=this.shownValues[this.highlightIdx];this.clearValues()}if(u){this.element.focus();return c(r)}};j.clearValues=function(){this.highlightIdx=-1;this.lastValue="";this.shownValues=[];this.container.innerHTML=""};j.addValues=function(r){var q,u,v;if(r&&r.length){u=v=(q=this.values).length;for(var s=0,t;(t=r[s])!==b;s++){if(t&&l(q,t)===-1){q[v++]=t}}if(v>u){this.refresh()}}};j.removeValues=function(s){var r,v,w,q;if(s&&s.length){v=w=(r=this.values).length;for(var t=0,u;(u=s[t])!==b;t++){if(u&&(q=l(r,u))>-1){r.splice(q,1)}}if(r.length<v){this.refresh()}}};j.refresh=function(){this.cache={};if(p&&this.options.useNativeInterface){this.container.innerHTML=this.generateDatalistOptionsHtml()}else{if(this.highlightIdx===-1){this.matchValue(this.lastValue)}}};var m=function(){var r,q;if((r=navigator).appName==="Microsoft Internet Explorer"){if(new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(r.userAgent)){q=parseFloat(RegExp.$1)}}return(q>5)?q:b};var a=function(s){var r,t,q;if((r=typeof(s))==="string"){if(f.DOMParser){q=new DOMParser().parseFromString(s,"text/xml")}else{if(f.ActiveXObject){q=new ActiveXObject("Microsoft.XMLDOM");q.async=false;q.loadXML(s)}}}else{if(r==="object"){t=(s.ownerDocument||s).documentElement||{};if(t.nodeName&&t.nodeName.toUpperCase()!=="HTML"){q=s}}}return q||null};var d=(k.addEventListener)?function(r,q,s){r.addEventListener(q,s,false)}:function(r,q,s){r.attachEvent("on"+q,s)};var c=function(q){if(q.stopPropagation){q.stopPropagation();q.preventDefault()}else{q.returnValue=false;q.cancelBubble=true}return false};var i=(k.addEventListener)?function(r,q,s){r.removeEventListener(q,s,false)}:function(r,q,s){r.detachEvent("on"+q,s)};var h=function(s,r){var q=o.call(arguments,2);return function(){return s.apply(r,q.concat(o.call(arguments)))}};var l=([].indexOf)?function(q,r){return q.indexOf(r)}:function(r,t){for(var s=0,q=r.length;s<q;s++){if(r[s]===t){return s}}return -1};var e=function(q){return k.getElementById(q)},p=!!(("list" in k.createElement("input"))&&k.createElement("datalist")&&f.HTMLDataListElement),o=Array.prototype.slice,g=m();f.Autocomplete=n})(this,this.document);
